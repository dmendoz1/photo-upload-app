(this["webpackJsonpphoto-management-app"]=this["webpackJsonpphoto-management-app"]||[]).push([[0],{42:function(e,t,a){e.exports=a(91)},47:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(13),c=a.n(r),i=(a(47),a(23)),s=a(3),l=function(e){var t=e.handleImageUpload,a=e.handleMosaicView,n=e.handleSortPhotosClick,r=e.isSortModeOn,c=e.photos;return o.a.createElement("div",{className:"sidebar-wrapper"},o.a.createElement("label",{className:"btn primary-btn input-file-button",disabled:r},o.a.createElement("input",{type:"file",onChange:t,disabled:r}),"UPLOAD PHOTO"),c.length>1&&o.a.createElement("button",{id:"mosaic-btn",className:"btn secondary-btn mosaic-view-btn",disabled:r,onClick:a},"MOSAIC VIEW"),c.length>1&&o.a.createElement("button",{id:"sort-btn",className:"btn",onClick:n},"SORT IMAGES"))},d=a(7),u=function(e){var t=e.photoId,a=e.image,n=e.handlePhotoOnClick,r=e.isSortModeOn;return o.a.createElement(d.b,{draggableId:"imageContainer".concat(t),index:t,isDragDisabled:!r},(function(e){return o.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef,className:"image-container ".concat(a.class),onClick:function(){return n(a.id)},id:"imageContainer".concat(t)}),o.a.createElement("img",{className:"photo",src:a.url,alt:t}))}))},m=function(e){var t=e.photos,a=e.handlePhotoOnClick,n=e.isSortModeOn,r=o.a.createElement("div",{className:"no-photos"}," Step up your photography game. Upload your first photo :) ");return o.a.createElement(d.c,{droppableId:"dashboard"},(function(e){return o.a.createElement("div",Object.assign({className:"dashboard-wrapper",id:"dashboard"},e.droppableProps,{ref:e.innerRef}),n&&o.a.createElement("h2",{className:"reordering-msg"},"Drag any of your images below to reorder your gallery"),t.length?t.map((function(e,t){return o.a.createElement(u,{key:t,image:e,handlePhotoOnClick:a,className:"image-container ".concat(e.class),photoId:t,isSortModeOn:n})})):r,e.placeholder)}))},p=a(8),h=a.n(p),g=a(15),b=a(39),f=a.n(b),v=function(e){return new Promise((function(t,a){var n=new Image;n.addEventListener("load",(function(){return t(n)})),n.addEventListener("error",(function(e){return a(e)})),n.setAttribute("crossOrigin","anonymous"),n.src=e}))};function E(e){return e*Math.PI/180}function O(e,t){return w.apply(this,arguments)}function w(){return(w=Object(g.a)(h.a.mark((function e(t,a){var n,o,r,c,i,s,l=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>2&&void 0!==l[2]?l[2]:0,e.next=3,v(t);case 3:return o=e.sent,r=document.createElement("canvas"),c=r.getContext("2d"),i=2*Math.max(o.width,o.height),r.width=i,r.height=i,c.translate(i/2,i/2),c.rotate(E(n)),c.translate(-i/2,-i/2),c.drawImage(o,i/2-.5*o.width,i/2-.5*o.height),s=c.getImageData(0,0,i,i),r.width=a.width,r.height=a.height,c.putImageData(s,0-i/2+.5*o.width-a.x,0-i/2+.5*o.height-a.y),e.abrupt("return",new Promise((function(e){r.toBlob((function(t){e(URL.createObjectURL(t))}),"image/jpeg")})));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var S=function(e){var t=e.photoId,a=e.photos,r=e.setPhotos,c=e.togglePopUp,i=a.filter((function(e){return e.id===t})),l=Object(n.useState)({x:0,y:0}),d=Object(s.a)(l,2),u=d[0],m=d[1],p=Object(n.useState)(1),b=Object(s.a)(p,2),v=b[0],E=b[1],w=Object(n.useState)(null),S=Object(s.a)(w,2),I=S[0],y=S[1],C=Object(n.useCallback)(Object(g.a)(h.a.mark((function e(){var n,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(i[0].url,I);case 3:n=e.sent,o=a.map((function(e){return e.id===t&&(e.url=n,e.class=""),e})),r(o),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),[I]);return o.a.createElement("div",null,o.a.createElement("div",{className:"popup-overlay",onClick:function(){return c("")}}),o.a.createElement("div",{className:"full-image-component"},o.a.createElement("div",{className:"close-btn",onClick:function(){return c("")}},"x"),o.a.createElement("div",{className:"image-fullsize-container"},o.a.createElement(f.a,{image:i[0].url,crop:u,zoom:v,aspect:1,onCropChange:m,onCropComplete:function(e,t){y(t)},onZoomChange:E})),o.a.createElement("div",{className:"image-actions"},o.a.createElement("p",{className:"note"},"Drag the cropping grid to a portion of the photo you would like to crop. Using a trackpad allows you to zoom into your photo"),o.a.createElement("button",{className:"btn primary-btn crop-btn",onClick:C},"Crop"),o.a.createElement("button",{className:"danger-btn remove btn",onClick:function(){var e=a.filter((function(e){return e.id!==t}));r(e),c("")}},"Remove"))))},I=function(){var e=JSON.parse(localStorage.getItem("myPhotosLocalStorage")),t=Object(n.useState)(e||[]),a=Object(s.a)(t,2),r=a[0],c=a[1],u=Object(n.useState)({show:!1,photoId:""}),p=Object(s.a)(u,2),h=p[0],g=p[1],b=Object(n.useState)(!1),f=Object(s.a)(b,2),v=f[0],E=f[1];Object(n.useEffect)((function(){localStorage.setItem("myPhotosLocalStorage",JSON.stringify(r))}),[r]);var O=function(e){g({show:!h.show,photoId:e})};return o.a.createElement("div",{className:"photo-manager-wrapper"},o.a.createElement("div",{className:"photo-manager-dashboard"},o.a.createElement(l,{setPhotos:c,handleImageUpload:function(e){var t=e.target.files[0];if(t.type.match("image.*")){var a=new FileReader;a.onload=function(e){var t=new Image;console.log("evt",e),t.src=e.target.result;var a=t.src;t.onload=function(){var e=t.naturalWidth,n=t.naturalHeight,o="";e>800&&n>700?o="big":e>n&&e/n>1.5?o="horizontal":n>e&&n/e>1.5&&(o="vertical");var s={url:a,class:o,id:r.length},l=[].concat(Object(i.a)(r),[s]);c(l)}},a.readAsDataURL(t)}},handleMosaicView:function(){var e=document.querySelector(".dashboard-wrapper"),t=document.querySelector("#mosaic-btn"),a=e.classList.contains("mosaic-view")?"MOSAIC VIEW":"GRID VIEW";e.classList.toggle("mosaic-view"),t.textContent=a},handleSortPhotosClick:function(){var e=document.querySelector(".dashboard-wrapper"),t=document.querySelector("#sort-btn"),a=e.classList.contains("sort-activated")?"SORT IMAGES":"DONE SORTING";e.classList.toggle("sort-activated"),t.textContent=a,E(!v)},isSortModeOn:v,photos:r}),o.a.createElement(d.a,{onDragEnd:function(e){var t=e.destination,a=e.source;if(console.log("RESULT",e),t&&(t.droppedId!==a.droppableId||t.index!==a.index)){var n=Object(i.a)(r),o=n[a.index];n.splice(a.index,1),n.splice(t.index,0,o),c(n)}}},o.a.createElement(m,{handlePhotoOnClick:O,photos:r,isSortModeOn:v})),h.show?o.a.createElement(S,{photos:r,photoId:h.photoId,togglePopUp:O,setPhotos:c}):null))};c.a.render(o.a.createElement(I,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.32029c38.chunk.js.map